{% extends 'base.html' %}
{% block content %}

<h1>Pet Profile: {{ pet.name }}</h1>
{% if pet.owner == request.user %}
<a href="{% url 'add-checklist' pet.id %}" class="btn btn-primary">Add a checklist for an upcoming visit(s)</a>
{% endif %}

<!-- <button type="button" class="button-lg">Pet Pal</button> -->
<div class="pet-detail-page">
<img class="pet-image-detail" src="{{pet.profile_Image.url}}">
</div>
<section>

<div class="info">
<h2>Owner</h2>
<p>{{ pet.owner }}</p>
</div>

<div class="info">
<h2>About Me</h2>
<p>{{ pet.about_Me }}</p>
</div>

{% if pet.vet_Info %}
<div class="info">
<h2>Vet Info</h2>
<p>{{ pet.vet_Info }}</p>
</div>
{% endif %}

<div class="info">
<h2>Emergency Contact</h2>
<p>{{ pet.emergency_Contact }}</p>
</div>


</section>

<h2>Checklist</h2>

{% if pet_checklists %}
    {% for checklist in pet_checklists %}
    <section>
    <p><b>Things to do on {{ checklist.visit.due_date_on }}</b></p>
    <form action="" method="POST">
    {% csrf_token %}
        {% for task in all_tasks %}
        {% if task.checklist_id.pet_id == pet and task.checklist_id.visit.due_date_on == checklist.visit.due_date_on %}
            {% if task.completed_on %}
            <span>"{{ task.description }}" completed on {{ task.completed_on }}</span<br>
            <p></p>
            {% else %}
            <input type="checkbox" value="{{task.id}}" name="task" class=""> {{ task.description }}<br>
            <p></p>
            {% endif %}
        {% endif %}
        {% endfor %}
    <button type="submit" class="btn btn-success" name="submit-checklist">Update Checklist</button>
    </form> 
    </section>  
    {% endfor %}
{% else %}
    <p>No checklists for this pet today.</p>
{% endif %}

{% endblock %}