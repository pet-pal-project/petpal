{% extends 'base.html' %}
{% block content %}

<h1>Pet Profile: {{ pet.name }}</h1>
{% if pet.owner == request.user %}
<a href="{% url 'add-checklist' pet.id %}" class="btn btn-primary">Add a checklist for an upcoming visit(s)</a>
{% endif %}

<!-- <button type="button" class="button-lg">Pet Pal</button> -->
<div class="pet-detail-page">
<img class="pet-image-detail" src="{{pet.profile_Image.url}}">
</div>
<section>

<div class="info">
<h2>Owner</h2>
<p>{{ pet.owner }}</p>
</div>

{% if pet.animal %}
<div class="info">
<h2>Animal</h2>
<p>{{ pet.animal }}</p>
</div>
{% endif %}

{% if pet.age %}
<div class="info">
<h2>Age</h2>
<p>{{ pet.age }}</p>
</div>
{% endif %}

{% if pet.breed %}
<div class="info">
<h2>Breed</h2>
<p>{{ pet.breed }}</p>
</div>
{% endif %}

{% if pet.weight %}
<div class="info">
<h2>Weight</h2>
<p>{{ pet.weight }} lbs.</p>
</div>
{% endif %}

{% if pet.sex %}
<div class="info">
<h2>Sex</h2>
<p>{{ pet.sex}}</p>
</div>
{% endif %}

{% if pet.color_and_Markings %}
<div class="info">
<h2>Color and Markings</h2>
<p>{{ pet.color_and_Markings }}</p>
</div>
{% endif %}


{% if pet.about_Me %}
<div class="info">
<h2>About Me</h2>
<p>{{ pet.about_Me }}</p>
</div>
{% endif %}

{% if pet.vet_Info %}
<div class="info">
<h2>Vet Info</h2>
<p>{{ pet.vet_Info }}</p>
</div>
{% endif %}


{% if pet.emergency_Contact %}
<div class="info">
<h2>Emergency Contact</h2>
<p>{{ pet.emergency_Contact }}</p>
</div>
{% endif %}


</section>

<h2>Checklist</h2>

{% if pet_checklists %}
    {% for checklist in pet_checklists %}
    <section>
    <p><b>Things to do on {{ checklist.visit.due_date_on }}</b></p>
    <form action="" method="POST">
    {% csrf_token %}
        {% for task in all_tasks %}
        {% if task.checklist_id.pet_id == pet and task.checklist_id.visit.due_date_on == checklist.visit.due_date_on %} 
            
            {% if task.completed_on %}
                <span>"{{ task.description }}" completed on {{ task.completed_on }}</span<br>
                <p></p>
                {% else %}
                <input type="checkbox" value="{{task.id}}" name="task" class=""> {{ task.description }}<br>
                <p></p>
            {% endif %}
            
        {% endif %}
        {% endfor %}
    <button type="submit" class="btn btn-success" name="submit-checklist">Update Checklist</button>
    </form> 
    </section>  
    {% endfor %}
{% else %}
    <p>No checklists for this pet today.</p>
{% endif %}

{% endblock %}